(this["webpackJsonpembed-lab-frontend"]=this["webpackJsonpembed-lab-frontend"]||[]).push([[0],{135:function(e,t,n){},137:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(37),i=n.n(r),j=(n(135),n(15)),l=n(237),s=n(249),u=n(78),o=n.n(u),b=n(13),d=n(2),O=Object(c.createContext)(null);function h(e){var t=e.children,n=Object(c.useState)(0),a=Object(b.a)(n,2),r=a[0],i=a[1];return Object(d.jsx)(O.Provider,{value:{loadingCount:r,setLoadingCount:i},children:t})}function x(){return Object(c.useContext)(O)}n(137);function p(){var e=x().loadingCount>0;return Object(c.useEffect)((function(){if(e){var t=setTimeout((function(){return o.a.start()}),1e3);return function(){clearTimeout(t),o.a.done()}}}),[e]),null}var f=n(53),v=n(54),m=n.n(v),g=n(79),C=n(113),y=n.n(C),k=n(83),T=n(114);function L(){var e=x().setLoadingCount;return Object(c.useEffect)((function(){return e((function(e){return e+1})),function(){return e((function(e){return e-1}))}})),null}var D=Object(c.createContext)(null),I="https://embed-jimmy.et.r.appspot.com";function E(e){var t=e.children,n=Object(c.useState)(!1),a=Object(b.a)(n,2),r=a[0],i=a[1],j=Object(c.useMemo)((function(){return y.a.create({baseURL:I})}),[]),l=Object(c.useCallback)(function(){var e=Object(g.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[j]),s=Object(k.b)("/",{fetcher:l}),u=s.mutate,o=Object(c.useCallback)(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u((function(e){if("undefined"!==typeof e){i(!0);var n=Object(f.a)(Object(f.a)({},t(e)),{},{changeId:(new Date).getTime()});return j.put("/updateDevice",n),Object(f.a)(Object(f.a)({},e),n)}}),!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[j,u]);return Object(c.useEffect)((function(){var e=Object(T.io)(I,{transports:["polling"]});return e.on("message",(function(e,t){var n=t;u((function(e){return e&&0!==n.changeId&&n.changeId<e.changeId?e:(i(!1),n)}),!1)})),function(){e.disconnect()}}),[u]),Object(d.jsxs)(D.Provider,{value:{device:s,updateDevice:o},children:[r?Object(d.jsx)(L,{}):null,Object(d.jsx)(k.a,{value:{fetcher:l},children:t})]})}function S(){return Object(c.useContext)(D)}var w,F=n(117),K=Object(F.a)({palette:{primary:{main:"#388E3C"}}}),P=n(36),B=n(229),M=n(238),R=n(239),J=n(241),W=n(242),z=n(243),A=n(116),U=n.n(A),X=Object(P.a)(M.a)(w||(w=Object(j.a)(["\n  height: 36px;\n  border-radius: 18px;\n"])));function Y(){var e=S(),t=e.device.data,n=e.updateDevice,a=t,r=a.airconOn,i=a.airconTemp,j=function(e){return function(){n((function(t){return{airconTemp:t.airconTemp+e}}))}},l=Object(c.useCallback)((function(){n((function(e){return{airconOn:!e.airconOn}}))}),[n]);return Object(d.jsx)(R.a,{children:Object(d.jsxs)(J.a,{children:[Object(d.jsx)(W.a,{variant:"h6",children:"Air-Conditioner"}),Object(d.jsx)(B.a,{marginY:1,children:Object(d.jsx)(W.a,{variant:"h3",color:"primary",align:"center",children:r?Object(d.jsxs)(d.Fragment,{children:[i,"\xb0C"]}):"Off"})}),Object(d.jsxs)(B.a,{display:"flex",justifyContent:"center",alignItems:"center",children:[Object(d.jsx)(X,{variant:"outlined",onClick:j(-1),disabled:!r,children:"-"}),Object(d.jsx)(B.a,{display:"inline-block",paddingX:2,children:Object(d.jsx)(z.a,{onClick:l,color:"primary",size:"medium",children:Object(d.jsx)(U.a,{})})}),Object(d.jsx)(X,{variant:"outlined",onClick:j(1),disabled:!r,children:"+"})]})]})})}var $,q=n(248),G=n(244),H=n(245),N=n(246),Q=n(233),V=n(247);function Z(e){var t=e.children,n=Object(c.useState)(!1),a=Object(b.a)(n,2),r=a[0],i=a[1],j=Object(c.useState)(null),l=Object(b.a)(j,2),s=l[0],u=l[1],o=S(),O=o.device.data,h=o.updateDevice,x=O.capacity,p=Object(c.useCallback)((function(e){var t=e.target.value;t.match(/^(?:\d+|)$/)&&u(t)}),[]),f=Object(c.useCallback)((function(){i(!0)}),[]),v=Object(c.useCallback)((function(){i(!1),u(null)}),[]);return Object(d.jsxs)(d.Fragment,{children:[Object(c.cloneElement)(t,{onClick:f,style:{cursor:"pointer"}}),Object(d.jsxs)(G.a,{open:r,onClose:v,children:[Object(d.jsx)(H.a,{children:"Edit"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),null!==s&&h((function(){return{capacity:parseInt(s)}})),v()},children:[Object(d.jsx)(N.a,{style:{paddingTop:0},children:Object(d.jsx)(Q.a,{autoFocus:!0,margin:"dense",label:"Room capacity",fullWidth:!0,variant:"standard",value:null!==s&&void 0!==s?s:x,onChange:p})}),Object(d.jsxs)(V.a,{children:[Object(d.jsx)(M.a,{onClick:v,children:"Cancel"}),Object(d.jsx)(M.a,{type:"submit",children:"Save"})]})]})]})]})}var _=Object(P.a)(q.a)($||($=Object(j.a)(["\n  height: 16px;\n  border-radius: 8px;\n\n  span {\n    border-radius: 8px;\n  }\n"])));function ee(){var e=S().device.data,t=e.count,n=e.capacity,c=t>n,a=c?100:t/n*100,r=c?"secondary":"primary";return Object(d.jsx)(R.a,{children:Object(d.jsxs)(J.a,{children:[Object(d.jsx)(W.a,{variant:"h5",children:"People Count"}),Object(d.jsxs)(W.a,{variant:"h3",color:r,children:[t,Object(d.jsx)(Z,{children:Object(d.jsxs)(W.a,{variant:"h5",component:"span",children:["/",n]})})]}),Object(d.jsx)(_,{variant:"determinate",value:a,color:r})]})})}var te,ne=n(5);function ce(e){var t=e.applianceKey,n=e.label,a=S(),r=a.device.data,i=a.updateDevice,j=r[t],l=Object(c.useCallback)((function(){i((function(e){return Object(ne.a)({},t,!e[t])}))}),[i,t]);return Object(d.jsx)(R.a,{style:{marginBottom:16},children:Object(d.jsx)(J.a,{style:{paddingBottom:16},children:Object(d.jsxs)(B.a,{display:"flex",alignItems:"center",children:[Object(d.jsx)(W.a,{variant:"h6",children:n}),Object(d.jsx)(B.a,{flex:1}),Object(d.jsx)(M.a,{onClick:l,variant:j?"contained":"text",children:j?"On":"Off"})]})})})}function ae(){return Object(d.jsxs)(B.a,{children:[Object(d.jsx)(ce,{applianceKey:"light1",label:"Light 1"}),Object(d.jsx)(ce,{applianceKey:"light2",label:"Light 2"}),Object(d.jsx)(ce,{applianceKey:"light3",label:"Light 3"}),Object(d.jsx)(ce,{applianceKey:"light4",label:"Light 4"}),Object(d.jsx)(ce,{applianceKey:"light5",label:"Light 5"})]})}function re(){var e=S().device,t=e.data;return e.error?Object(d.jsx)("span",{children:"Error fetching device"}):t?Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Main Room"}),Object(d.jsx)(ee,{}),Object(d.jsxs)(B.a,{display:{xs:"none",sm:"grid"},gridTemplateColumns:"repeat(12, 1fr)",gap:2,marginTop:2,children:[Object(d.jsx)(B.a,{gridColumn:"auto / span 6",children:Object(d.jsx)(Y,{})}),Object(d.jsx)(B.a,{gridColumn:"auto / span 6",children:Object(d.jsx)(ae,{})})]}),Object(d.jsxs)(B.a,{display:{xs:"block",sm:"none"},marginTop:2,children:[Object(d.jsx)(ae,{}),Object(d.jsx)(Y,{})]})]}):Object(d.jsx)(L,{})}function ie(e){var t=e.children;return Object(d.jsx)(l.a,{theme:K,children:Object(d.jsx)(h,{children:Object(d.jsx)(E,{children:t})})})}var je=P.a.h1(te||(te=Object(j.a)(["\n  text-align: center;\n"])));var le=function(){return Object(d.jsx)(ie,{children:Object(d.jsxs)(s.a,{maxWidth:"md",children:[Object(d.jsx)(je,{children:"Distancing Counter"}),Object(d.jsx)(re,{}),Object(d.jsx)(p,{})]})})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,250)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(le,{})}),document.getElementById("root")),se()}},[[196,1,2]]]);
//# sourceMappingURL=main.00696016.chunk.js.map